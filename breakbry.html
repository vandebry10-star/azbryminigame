<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Breakbry â€” Azbry-MD</title>
  <link rel="stylesheet" href="assets/css/azbry.css">
  <style>
    body{
      display:flex;align-items:center;justify-content:center;
      height:100vh;margin:0;background:#0b0d10;color:#e6f0ff;
      font-family:Inter,system-ui,sans-serif;overflow:hidden;
    }
    .game-card{
      width:min(90vw,600px);height:min(80vh,500px);
      background:rgba(17,20,24,.8);
      border:1px solid rgba(255,255,255,.08);
      box-shadow:0 8px 40px rgba(0,0,0,.5);
      border-radius:18px;padding:16px;display:flex;
      flex-direction:column;align-items:center;justify-content:center;
      position:relative;overflow:hidden;
    }
    canvas{background:#0f1317;border-radius:12px;}
    h1{position:absolute;top:8px;left:16px;color:#b8ff9a;font-size:1.2rem;
      text-shadow:0 0 10px rgba(184,255,154,.4);}
    .level{position:absolute;top:8px;right:16px;color:#93a3b8;font-size:.9rem}
  </style>
</head>
<body>
  <div class="game-card">
    <h1>BREAKBRY</h1>
    <div class="level">Level: <span id="level">1</span></div>
    <canvas id="game" width="560" height="420"></canvas>
  </div>

  <script>
  const canvas=document.getElementById('game');
  const ctx=canvas.getContext('2d');
  const levelEl=document.getElementById('level');

  // Audio system (simple pop)
  const AudioSys=(()=>{
    let ctxA;function ensure(){if(!ctxA)ctxA=new(window.AudioContext||window.webkitAudioContext)();}
    function pop(){ensure();const o=ctxA.createOscillator(),g=ctxA.createGain();
      o.type='square';o.frequency.value=500;g.gain.value=.04;
      o.connect(g).connect(ctxA.destination);
      o.start();o.frequency.exponentialRampToValueAtTime(200,ctxA.currentTime+.08);
      g.gain.exponentialRampToValueAtTime(.0001,ctxA.currentTime+.09);
      o.stop(ctxA.currentTime+.1);}
    return{pop};
  })();

  let paddle={x:canvas.width/2-50,y:canvas.height-20,w:100,h:10,speed:7,dx:0};
  let ball={x:canvas.width/2,y:canvas.height-40,r:8,dx:3,dy:-3,speed:4};
  const rowCount=5,colCount=7;
  let bricks=[];
  let level=1; const maxLevel=30;

  function createBricks(){
    bricks=[];
    for(let r=0;r<rowCount;r++){
      bricks[r]=[];
      for(let c=0;c<colCount;c++){
        bricks[r][c]={x:c*(75+10)+35,y:r*(20+10)+30,w:75,h:20,visible:true};
      }
    }
  }

  function drawBricks(){
    bricks.forEach(row=>{
      row.forEach(b=>{
        if(b.visible){
          ctx.beginPath();
          ctx.rect(b.x,b.y,b.w,b.h);
          ctx.fillStyle='#39ff14';
          ctx.shadowColor='#39ff14';
          ctx.shadowBlur=10;
          ctx.fill();
          ctx.closePath();
        }
      });
    });
  }

  function drawPaddle(){
    ctx.beginPath();
    const grd=ctx.createLinearGradient(paddle.x,paddle.y,paddle.x+paddle.w,paddle.y);
    grd.addColorStop(0,'#39ff14');grd.addColorStop(1,'#9dffcf');
    ctx.fillStyle=grd;
    ctx.fillRect(paddle.x,paddle.y,paddle.w,paddle.h);
    ctx.shadowColor='#39ff14';
    ctx.shadowBlur=20;
    ctx.closePath();
  }

  function drawBall(){
    ctx.beginPath();
    ctx.arc(ball.x,ball.y,ball.r,0,Math.PI*2);
    ctx.fillStyle='#fff';
    ctx.shadowColor='#fff';
    ctx.shadowBlur=12;
    ctx.fill();
    ctx.closePath();
  }

  function movePaddle(){
    paddle.x+=paddle.dx;
    if(paddle.x<0)paddle.x=0;
    if(paddle.x+paddle.w>canvas.width)paddle.x=canvas.width-paddle.w;
  }

  function moveBall(){
    ball.x+=ball.dx; ball.y+=ball.dy;
    // dinding
    if(ball.x+ball.r>canvas.width||ball.x-ball.r<0){ball.dx*=-1;AudioSys.pop();}
    if(ball.y-ball.r<0){ball.dy*=-1;AudioSys.pop();}
    if(ball.y+ball.r>canvas.height){resetLevel();}
    // paddle
    if(ball.x>paddle.x && ball.x<paddle.x+paddle.w && ball.y+ball.r>paddle.y){
      ball.dy=-ball.speed; AudioSys.pop();
    }
    // brick
    bricks.forEach(row=>{
      row.forEach(b=>{
        if(b.visible){
          if(ball.x>b.x && ball.x<b.x+b.w && ball.y-ball.r<b.y+b.h && ball.y+ball.r>b.y){
            ball.dy*=-1;b.visible=false;AudioSys.pop();
            if(isLevelClear()){nextLevel();}
          }
        }
      });
    });
  }

  function isLevelClear(){
    return bricks.flat().every(b=>!b.visible);
  }

  function nextLevel(){
    if(level<maxLevel){
      level++; levelEl.textContent=level;
      ball.speed+=.4; paddle.speed+=.1;
      ball.dx=3+(Math.random()-.5)*2; ball.dy=-ball.speed;
      createBricks(); resetBall();
    }else{
      alert('ðŸŽ‰ Semua level selesai! Kamu menang!');
      level=1; levelEl.textContent=level; ball.speed=4; createBricks(); resetBall();
    }
  }

  function resetLevel(){
    ball.x=canvas.width/2; ball.y=canvas.height-40;
    ball.dx=3; ball.dy=-ball.speed;
    paddle.x=canvas.width/2-paddle.w/2;
  }

  function resetBall(){resetLevel();}

  function draw(){
    ctx.clearRect(0,0,canvas.width,canvas.height);
    drawBricks(); drawPaddle(); drawBall();
  }

  function update(){
    movePaddle(); moveBall(); draw();
    requestAnimationFrame(update);
  }

  function keyDown(e){
    if(e.key==='ArrowRight'||e.key==='Right')paddle.dx=paddle.speed;
    else if(e.key==='ArrowLeft'||e.key==='Left')paddle.dx=-paddle.speed;
  }
  function keyUp(e){
    if(e.key==='ArrowRight'||e.key==='ArrowLeft'||e.key==='Right'||e.key==='Left')paddle.dx=0;
  }

  function handleTouch(e){
    const touchX=e.touches[0].clientX-canvas.getBoundingClientRect().left;
    paddle.x=touchX-paddle.w/2;
  }

  createBricks(); update();
  document.addEventListener('keydown',keyDown);
  document.addEventListener('keyup',keyUp);
  canvas.addEventListener('touchmove',handleTouch,{passive:true});
  </script>

  <script>
  // footer otomatis
  (function(){
    if(document.querySelector('.azbry-footer')) return;
    const f=document.createElement('div');
    f.className='azbry-footer';
    f.innerHTML=`<a class=\"azbry-cta\" href=\"https://azbry-portofolio.vercel.app/\" target=\"_blank\" rel=\"noopener\">â†— Portofolio</a>
      <div class=\"azbry-meta\"><div class=\"azbry-license\">Lisensi MIT â€¢ Â© ${new Date().getFullYear()} Azbry-MD</div>
      <div class=\"azbry-owner\">Dikelola oleh FebryWesker</div></div>
      <div class=\"azbry-empty\" aria-hidden=\"true\"></div>`;
    document.body.appendChild(f);
  })();
  </script>
</body>
</html>
