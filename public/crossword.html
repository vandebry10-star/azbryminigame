<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Teka-Teki Silang â€” Azbry (10Ã—10)</title>
<style>
  :root{
    --bg:#0b0f12;--ink:#e8f0fb;--accent:#b8ff9a;
    --panel:rgba(255,255,255,.05);--bd:rgba(255,255,255,.10);
  }
  html,body{margin:0;background:var(--bg);color:var(--ink);
    font:600 14px/1.35 system-ui,Segoe UI,Roboto,Arial}
  main{max-width:980px;margin:0 auto;padding:18px 16px}
  h1{margin:0 0 14px;font-weight:900;font-size:clamp(22px,4.6vw,36px);
     color:var(--accent);text-shadow:0 0 16px rgba(184,255,154,.25)}
  .shell{display:grid;grid-template-columns: 1fr;gap:14px}
  .boardwrap{display:flex;justify-content:center}
  /* papan menyesuaikan bounding box data (tanpa sel sia-sia) */
  .grid{
    display:grid; gap:6px; padding:16px; border-radius:16px;
    background:linear-gradient(180deg,rgba(255,255,255,.03),rgba(255,255,255,.015));
    border:1px solid var(--bd); box-shadow:0 10px 32px rgba(0,0,0,.35);
  }
  .cell{
    width:min(64px, 7.4vw); aspect-ratio:1/1; border-radius:10px;
    display:grid; place-items:center; position:relative;
    background:var(--panel); border:1px solid var(--bd); font-weight:900;
    font-size:clamp(14px,3.6vw,22px); user-select:none;
  }
  .block{ background:rgba(255,255,255,.08); }
  .cell.active{ outline:2px solid var(--accent); outline-offset:2px; }
  .num{
    position:absolute; left:6px; top:4px; font-size:11px; opacity:.85; font-weight:800;
    color:#cfe7d0;
  }
  .toolbar{display:flex;gap:10px;flex-wrap:wrap;justify-content:center}
  .btn{
    padding:10px 14px;border-radius:12px;border:1px solid var(--bd);
    background:var(--panel);color:var(--ink);font-weight:800;cursor:pointer
  }
  .btn.accent{
    background:linear-gradient(180deg,var(--accent),#a3f07f);
    color:#0b0f12;border-color:transparent;box-shadow:0 0 12px rgba(184,255,154,.25)
  }
  .cols{display:grid;gap:16px}
  .clues{padding:12px;border:1px solid var(--bd);border-radius:12px;background:var(--panel)}
  .clues h3{margin:0 0 8px;font-size:16px;color:#d6e3d7}
  .clues ol{margin:0;padding-left:22px}
  .clues li{margin:6px 0}
  .hint{opacity:.8}
  @media (min-width:980px){
    .shell{grid-template-columns: 520px 1fr}
    .cell{width:48px}
  }
</style>
</head>
<body>
<main>
  <h1>Teka-Teki Silang â€” Azbry</h1>

  <div class="shell">
    <div class="boardwrap">
      <div id="grid" class="grid" aria-label="Papan TTS"></div>
    </div>

    <div class="cols">
      <div class="toolbar">
        <span id="dir" class="btn" aria-live="polite">Arah: Mendatar</span>
        <button id="btnCheck" class="btn accent">Cek Jawaban</button>
        <button id="btnReset" class="btn">Reset</button>
      </div>

      <div class="clues">
        <h3>Mendatar</h3>
        <ol id="across"></ol>
      </div>
      <div class="clues">
        <h3>Menurun</h3>
        <ol id="down"></ol>
      </div>
      <div class="hint">Klik kotak â†’ ketik huruf â€¢ Spasi: ganti arah â€¢ Backspace: hapus</div>
    </div>
  </div>

  <!-- input tersembunyi agar keyboard HP muncul -->
  <input id="hid" type="text" autocomplete="off"
         style="opacity:0;position:absolute;z-index:-1" />
</main>

<script>
/* =========================================================
   Azbry Crossword â€” 10 Mendatar + 10 Menurun
   - Hanya menggambar sel yang dipakai (tanpa kotak sia-sia)
   - Nomor di kotak pertama = nomor soal
   - Mobile-friendly (hidden input untuk munculin keyboard)
   ========================================================= */

/** Definisi entri
 *  r,c = koordinat (0-based) dalam â€œkanvasâ€ internal
 *  dir = 'A' (across/mendatar) atau 'D' (down/menurun)
 *  ans = JAWABAN HURUF KAPITAL TANPA SPASI
 *  clue = teks petunjuk
 *  nomor akan ditentukan otomatis sesuai urutan di bawah (1..10 tiap grup)
 */
const ACROSS = [
  {r:0,c:0,dir:'A',ans:'RUMAH',     clue:'Tempat tinggal manusia'},
  {r:0,c:7,dir:'A',ans:'SEWA',      clue:'Disewa sementara'},
  {r:2,c:0,dir:'A',ans:'ARENA',     clue:'Tempat pertandingan'},
  {r:2,c:7,dir:'A',ans:'IKLAN',     clue:'Promosi komersial'},
  {r:4,c:0,dir:'A',ans:'KOMPAS',    clue:'Penunjuk arah di peta'},
  {r:4,c:8,dir:'A',ans:'ASAL',      clue:'Berasal'},
  {r:6,c:0,dir:'A',ans:'UNDANG',    clue:'Meminta hadir secara resmi'},
  {r:6,c:8,dir:'A',ans:'DATA',      clue:'Kumpulan fakta'},
  {r:8,c:0,dir:'A',ans:'SEPEDA',    clue:'Kendaraan beroda dua'},
  {r:10,c:0,dir:'A',ans:'POTONG',   clue:'Memotong tipis'}
];

const DOWN = [
  {r:0,c:2,dir:'D',ans:'MATA',      clue:'Bagian tubuh untuk melihat'},
  {r:0,c:9,dir:'D',ans:'PENA',      clue:'Benda untuk menulis'},
  {r:0,c:11,dir:'D',ans:'SUARA',    clue:'Bunyi; vokal'},
  {r:1,c:4,dir:'D',ans:'TANAM',     clue:'Menanam bibit'},
  {r:1,c:6,dir:'D',ans:'INTI',      clue:'Pusat; inti'},
  {r:3,c:0,dir:'D',ans:'ALAMI',     clue:'Berasal dari alam'},
  {r:3,c:5,dir:'D',ans:'AKTIF',     clue:'Banyak bergerak'},
  {r:3,c:10,dir:'D',ans:'HOBI',     clue:'Kegemaran'},
  {r:5,c:3,dir:'D',ans:'RAMAH',     clue:'Sikap bersahabat'},
  {r:5,c:7,dir:'D',ans:'LIRIK',     clue:'Kata-kata pada lagu'}
];

// beri nomor 1..10 sesuai urutan
ACROSS.forEach((e,i)=>e.no=i+1);
DOWN.forEach((e,i)=>e.no=i+1);

const entries = [...ACROSS, ...DOWN];

// hitung bounding box (biar grid rapat tanpa sel kosong)
let minR=Infinity,minC=Infinity,maxR=-1,maxC=-1;
for(const e of entries){
  const len=e.ans.length;
  const r2=e.dir==='A'? e.r : e.r+len-1;
  const c2=e.dir==='A'? e.c+len-1 : e.c;
  minR=Math.min(minR,e.r); minC=Math.min(minC,e.c);
  maxR=Math.max(maxR,r2);  maxC=Math.max(maxC,c2);
}
const H = maxR-minR+1, W = maxC-minC+1;

// matrix papan: null = blok; {ch,refs[]} = sel huruf
const board=[...Array(H)].map(()=>Array(W).fill(null));

// taruh kata ke papan
for(const e of entries){
  let {r,c,dir,ans,no}=e;
  r-=minR; c-=minC;
  for(let i=0;i<ans.length;i++){
    const rr = r + (dir==='D'? i:0);
    const cc = c + (dir==='A'? i:0);
    const ch = ans[i];
    if(!board[rr][cc]) board[rr][cc]={ch:'',refs:[]};
    board[rr][cc].refs.push({entry:e, index:i});
    // jika ada tabrakan huruf, sinkronkan
    if(board[rr][cc].ch && board[rr][cc].ch!==ch){
      // konflik: pakai huruf jawaban pertama, tapi karena dataset diselaraskan, mestinya cocok
    }
    board[rr][cc].ch = ch;
  }
}

// generate DOM
const $grid = document.getElementById('grid');
$grid.style.gridTemplateColumns = `repeat(${W}, 1fr)`;

const cells=[]; // mapping [r][c] -> elem
for(let r=0;r<H;r++){
  for(let c=0;c<W;c++){
    const used = board[r][c];
    const el = document.createElement('div');
    el.className = 'cell' + (used?'':' block');
    el.dataset.r=r; el.dataset.c=c;
    if(used){
      // nomor kalau sel adalah awal salah satu entri
      const starts = used.refs.filter(t=>t.index===0);
      if(starts.length){
        const num = Math.min(...starts.map(t=>t.entry.no));
        const b = document.createElement('div');
        b.className='num'; b.textContent=num;
        el.appendChild(b);
      }
      el.textContent=''; // kosong dulu (belum terisi)
    }
    $grid.appendChild(el);
    cells.push(el);
  }
}
function cellAt(r,c){ return $grid.querySelector(`.cell[data-r="${r}"][data-c="${c}"]`); }

// render daftar petunjuk
function renderClues(){
  const a = document.getElementById('across');
  const d = document.getElementById('down');
  a.innerHTML=''; d.innerHTML='';
  ACROSS.forEach(e=>{
    const li=document.createElement('li'); li.textContent=`${e.clue}`; a.appendChild(li);
  });
  DOWN.forEach(e=>{
    const li=document.createElement('li'); li.textContent=`${e.clue}`; d.appendChild(li);
  });
}
renderClues();

// state
let dir = 'A'; // 'A' atau 'D'
let cur = {r:0,c:0}; // posisi aktif (relatif ke board)
const $dir = document.getElementById('dir');
function setDir(d){ dir=d; $dir.textContent = `Arah: ${d==='A'?'Mendatar':'Menurun'}`; }
setDir('A');

// cari sel berikut pada arah aktif
function nextCell(r,c,step){
  let rr=r, cc=c;
  do{
    rr += (dir==='D'? step:0);
    cc += (dir==='A'? step:0);
  }while(rr>=0 && rr<H && cc>=0 && cc<W && !board[rr][cc]);
  if(rr<0||rr>=H||cc<0||cc>=W) return null;
  return {r:rr,c:cc};
}

// fokuskan sel
function focusCell(r,c){
  // valid?
  if(!board[r]?.[c]) return;
  document.querySelectorAll('.cell.active').forEach(e=>e.classList.remove('active'));
  cellAt(r,c).classList.add('active');
  cur={r,c};
  // fokuskan hidden input supaya keyboard HP muncul
  document.getElementById('hid').focus();
}
(function initFocus(){
  // cari sel terawal yang berisi huruf
  outer: for(let r=0;r<H;r++){
    for(let c=0;c<W;c++){
      if(board[r][c]){ focusCell(r,c); break outer; }
    }
  }
})();

// input huruf
function put(ch){
  const cell=board[cur.r][cur.c];
  if(!cell) return;
  cellAt(cur.r,cur.c).textContent = ch;
  const nx = nextCell(cur.r,cur.c,1);
  if(nx) focusCell(nx.r,nx.c);
}
function back(){
  const cell=board[cur.r][cur.c];
  if(!cell) return;
  // kalau sel sekarang kosong, mundur dulu
  if(!cellAt(cur.r,cur.c).textContent){
    const pv = nextCell(cur.r,cur.c,-1);
    if(pv) focusCell(pv.r,pv.c);
  }
  cellAt(cur.r,cur.c).textContent='';
}

document.addEventListener('keydown',e=>{
  if(e.key===' '){ setDir(dir==='A'?'D':'A'); e.preventDefault(); return; }
  if(e.key==='Backspace'){ back(); e.preventDefault(); return; }
  const k = e.key.toUpperCase();
  if(k.length===1 && k>='A' && k<='Z'){ put(k); }
});

// klik sel untuk fokus
$grid.addEventListener('click',e=>{
  const t=e.target.closest('.cell'); if(!t) return;
  const r=+t.dataset.r, c=+t.dataset.c; if(!board[r][c]) return;
  focusCell(r,c);
});

// hidden input untuk HP
document.getElementById('hid').addEventListener('input',e=>{
  const v=e.target.value.slice(-1).toUpperCase();
  if(v>='A'&&v<='Z') put(v);
  e.target.value='';
});
document.getElementById('hid').addEventListener('keydown',e=>{
  if(e.key==='Backspace'){ back(); e.preventDefault(); }
});

// cek jawaban
document.getElementById('btnCheck').onclick=()=>{
  let ok=true;
  // periksa per entri (agar huruf silang tetap konsisten)
  for(const e of entries){
    let s='';
    for(let i=0;i<e.ans.length;i++){
      const r=e.r-minR+(e.dir==='D'?i:0);
      const c=e.c-minC+(e.dir==='A'?i:0);
      s += (cellAt(r,c).textContent||'');
    }
    if(s!==e.ans){ ok=false; break; }
  }
  alert(ok ? 'Mantap! Semua benar. ðŸŽ‰' : 'Masih ada yang salah, cek lagi ya.');
};

// reset
document.getElementById('btnReset').onclick=()=>{
  $grid.querySelectorAll('.cell').forEach(el=>{
    if(!el.classList.contains('block')){
      // pertahankan nomor kecil di pojok
      const num = el.querySelector('.num');
      el.textContent='';
      if(num) el.appendChild(num);
    }
  });
  setDir('A');
  // fokus ke sel awal lagi
  initFocus();
};

</script>
</body>
</html>
