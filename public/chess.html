<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Azbry Chess.com</title>

  <!-- Google Font untuk JUDUL saja -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@700;800;900&display=swap" rel="stylesheet">

  <!-- Styles -->
  <link rel="stylesheet" href="assets/css/azbry.css?v=21" />
  <link rel="stylesheet" href="assets/css/chess.css?v=21" />

  <style>
    body{
      max-width:980px;
      margin:0 auto;
      padding:16px;
      background:#0b0f12;
      color:#e8f0fb;
      font-family:system-ui,sans-serif;
    }
    .hero-title{text-align:center;margin:8px 0 10px}
    .hero-title h1{
      margin:0;
      font-family:"Poppins", system-ui, sans-serif;
      font-weight:800;
      letter-spacing:.5px;
      font-size:clamp(26px,6vw,40px);
      color:var(--azbry-accent,#b8ff9a);
      text-shadow:0 0 16px rgba(184,255,154,.3);
    }

    /* toolbar umum */
    .toolbar{
      max-width:920px;
      margin:8px auto 14px;
      display:flex;
      flex-wrap:wrap;
      gap:10px;
      align-items:center;
      justify-content:center;
    }
    .btn{
      padding:9px 13px;
      border-radius:12px;
      font-weight:800;
      cursor:pointer;
      border:1px solid rgba(255,255,255,.08);
      background:rgba(255,255,255,.05);
      color:#e8f0fb;
      transition:.2s;
    }
    .btn:hover{
      background:rgba(255,255,255,.08);
    }
    .btn.accent{
      background:linear-gradient(180deg,var(--azbry-accent,#b8ff9a),var(--azbry-accent-2,#a3f07f));
      color:#0b0f12;
      border-color:transparent;
      box-shadow:0 0 12px rgba(184,255,154,.25);
    }

    .panel{max-width:920px;margin:0 auto}
    .board-wrap{max-width:820px;margin:0 auto 12px;position:relative;}

    /* header di atas papan */
    .board-header{
      max-width:820px;
      margin:10px auto 8px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      flex-wrap:wrap;
      gap:8px;
    }
    .board-header .left,
    .board-header .right{
      display:flex;
      gap:8px;
      align-items:center;
      flex-wrap:wrap;
    }

    /* tombol kembali kecil dan netral */
    #btnMenu{
      font-size:14px;
      padding:7px 10px;
      border-radius:8px;
      background:rgba(255,255,255,.08);
      color:#cfd8e3;
      border:1px solid rgba(255,255,255,.1);
      box-shadow:none;
      transition:.15s;
    }
    #btnMenu:hover{
      background:rgba(255,255,255,.12);
      color:#fff;
    }

    /* tombol Muat Ulang tampil netral (non accent) */
    #btnReset{
      background:rgba(255,255,255,.05);
      color:#e8f0fb;
      border:1px solid rgba(255,255,255,.08);
      box-shadow:none;
    }
    #btnReset:hover{
      background:rgba(255,255,255,.08);
    }

    /* captured lebih kecil */
    .captured.panel{margin-top:8px}
    .cap-row{
      display:flex;
      gap:8px;
      align-items:center;
      flex-wrap:wrap;
      margin:2px 0;
    }
    .cap-tray{
      display:flex;
      gap:4px;
      flex-wrap:wrap;
      min-height:22px;
      padding:6px 8px;
      border-radius:10px;
      background:var(--panel-bg-1, rgba(255,255,255,.04));
      border:1px solid var(--panel-bd, rgba(255,255,255,.08));
    }
    .cap-piece{
      font-size:18px;
      line-height:1;
      filter:drop-shadow(0 0 6px rgba(0,0,0,.3));
    }

    /* Result modal gaya sederhana */
    #resultModal{
      position:fixed;inset:0;z-index:10000;background:rgba(11,13,16,.92);
      display:flex;align-items:center;justify-content:center;
      opacity:0;pointer-events:none;transition:opacity .25s;
    }
    #resultModal.show{opacity:1;pointer-events:auto;}
    .result-card{
      width:min(92vw,560px);
      padding:22px;
      border-radius:16px;
      text-align:center;
      background:linear-gradient(180deg,rgba(255,255,255,.03),rgba(255,255,255,.015));
      border:1px solid rgba(255,255,255,.08);
      box-shadow:0 20px 60px rgba(0,0,0,.45), inset 0 0 0 1px rgba(255,255,255,.03);
    }
    .result-card h2{
      margin:4px 0 8px;
      color:var(--azbry-accent,#b8ff9a);
      font-weight:900;
      text-shadow:0 0 18px rgba(184,255,154,.35);
      font-size:clamp(22px,4.4vw,34px);
    }
    .result-sub{color:#cfd8e6;opacity:.9;margin-bottom:14px;}
    .result-actions{display:flex;gap:10px;justify-content:center;flex-wrap:wrap;}
  </style>
</head>

<body>
  <main id="chess-app">
    <div class="hero-title"><h1>Azbry Chess.com</h1></div>

    <!-- HEADER ATAS BOARD -->
    <div class="board-header">
      <div class="left">
        <button id="modeHuman" class="btn accent">VS Human (2P)</button>
        <button id="modeAI" class="btn">VS Azbry-MD</button>
      </div>
      <div class="right">
        <button id="btnMenu" class="btn">‚Üê Kembali ke Menu</button>
      </div>
    </div>

    <!-- BOARD -->
    <section class="board-wrap">
      <div id="board" class="board" aria-label="board"></div>
    </section>

    <!-- TOOLBAR BAWAH -->
    <div class="toolbar">
      <button id="btnReset" class="btn">Muat Ulang</button>
      <button id="btnUndo" class="btn">Undo</button>
      <button id="btnRedo" class="btn">Redo</button>
      <button id="btnFlip" class="btn">Balik Meja</button>
    </div>

    <!-- CAPTURED PIECES -->
    <section class="captured panel">
      <div class="cap-row">
        <strong>HITAM Modar:</strong>
        <div id="capBlack" class="cap-tray"></div>
      </div>
      <div class="cap-row">
        <strong>Putih Modar:</strong>
        <div id="capWhite" class="cap-tray"></div>
      </div>
    </section>

    <!-- LOG -->
    <section class="panel move-log">
      <h4>Riwayat Langkah</h4>
      <pre id="moveHistory">_</pre>
    </section>

    <!-- RESULT MODAL -->
    <div id="resultModal">
      <div class="result-card">
        <h2 id="resultText">Putih Menang!</h2>
        <div id="resultSub" class="result-sub"></div>
        <div class="result-actions">
          <button id="btnPlayAgain" class="btn accent">Main Lagi</button>
          <button id="btnCloseResult" class="btn">Tutup</button>
        </div>
      </div>
    </div>
  </main>

  <!-- Scripts (URUTAN WAJIB) -->
  <script src="assets/js/chess-engine.js?v=21"></script>
  <script src="assets/js/main.js?v=21"></script>

  <!-- Glue: tombol mode, menu & modal -->
  <script>
  (function(){
    const btnHuman = document.getElementById('modeHuman');
    const btnAI    = document.getElementById('modeAI');
    const modal    = document.getElementById('resultModal');
    const txt      = document.getElementById('resultText');
    const sub      = document.getElementById('resultSub');

    // highlight mode aktif
    function setActive(which){
      if(which==='ai'){
        btnAI.classList.add('accent');
        btnHuman.classList.remove('accent');
      }else{
        btnHuman.classList.add('accent');
        btnAI.classList.remove('accent');
      }
    }
    btnHuman.addEventListener('click',()=>setActive('human'));
    btnAI.addEventListener('click',()=>setActive('ai'));

    // result modal control
    document.getElementById('btnCloseResult').addEventListener('click',()=>modal.classList.remove('show'));
    document.getElementById('btnPlayAgain').addEventListener('click',()=>{
      modal.classList.remove('show');
      document.getElementById('btnReset')?.click();
    });

    // fungsi global show result (dipanggil dari main.js)
    window.__azbrySetResult = function({text,subText}){
      txt.textContent = text || '';
      sub.textContent = subText || '';
      modal.classList.add('show');
    };

    // tombol kembali ke menu utama
    document.getElementById('btnMenu')?.addEventListener('click', ()=>{
      window.location.href = "https://azbryminigamess.vercel.app/";
    });
  })();
  </script>
</body>
</html>
