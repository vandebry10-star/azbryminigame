<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"/>
<title>Azbry Wordle Lite (Hard Mode)</title>
<link rel="stylesheet" href="assets/css/azbry.css?v=20"/>
<style>
  .wrap{max-width:560px;margin:0 auto}
  .topbar{display:flex;align-items:center;gap:10px;margin:10px 0 12px}
  .title h1{margin:0;font-weight:900;color:var(--azbry-accent);text-shadow:0 0 16px var(--azbry-ring)}

  .board-wrap{margin:10px 0 12px;border:1px solid var(--panel-bd);border-radius:16px;
    background:linear-gradient(180deg,rgba(255,255,255,.03),rgba(255,255,255,.015));
    box-shadow:0 10px 32px rgba(0,0,0,.35),inset 0 1px 0 rgba(255,255,255,.03);padding:14px}
  .grid{display:grid;gap:8px;grid-template-columns:repeat(5,1fr);grid-template-rows:repeat(6,1fr)}
  .cell{aspect-ratio:1/1;border-radius:10px;display:grid;place-items:center;
    font-weight:900;font-size:clamp(18px,6vw,28px);
    background:var(--panel-bg-1);border:1px solid var(--panel-bd);color:#eaf1e9;
    transition:transform .12s ease,background .25s ease,border-color .25s ease}
  .cell.f{background:#6aaa64;color:#0b0d10;border-color:#6aaa64}
  .cell.p{background:#c9b458;color:#0b0d10;border-color:#c9b458}
  .cell.m{opacity:.55}
  .pop{animation:pop .12s ease}@keyframes pop{0%{transform:scale(.92)}100%{transform:scale(1)}}
  .flip{animation:flip .45s ease both}@keyframes flip{50%{transform:rotateX(90deg)}51%{transform:rotateX(0)}}

  .msg{margin:10px 0 6px;min-height:22px;opacity:.9;text-align:center}
  .pillbar{display:flex;gap:8px;flex-wrap:wrap;justify-content:center;align-items:center;margin-top:10px}
  .pill{padding:6px 10px;border-radius:999px;background:var(--panel-bg-1);border:1px solid var(--panel-bd);font-weight:800}
  .kb-wrap{margin-top:10px}
  .kb{display:grid;grid-template-columns:1fr auto;gap:8px;align-items:stretch;width:100%}
  .kb-rows{display:grid;gap:6px}
  .row{display:flex;gap:6px;justify-content:center}
  .key{padding:12px 10px;border-radius:10px;background:var(--panel-bg-1);
    border:1px solid var(--panel-bd);font-weight:800;color:#eaf1e9;min-width:34px;flex:1 1 auto;text-align:center}
  .side{display:flex;flex-direction:column;gap:6px;align-self:stretch}
  .key.del{min-width:74px}
  .key.enter{min-width:74px;height:calc(2.4em + 18px)}
  .panel.note{padding:12px;border:1px solid var(--panel-bd);border-radius:16px;background:var(--panel-bg-2)}
  .note h4{margin:0 0 6px;color:#cdd6e3}.note p{margin:0;color:#aeb9c8}
</style>
</head>
<body>
<main class="container wrap">
  <div class="topbar"><div class="title"><span class="tag">AZBRY • MD</span><h1>Wordle Lite</h1></div></div>
  <section class="panel note"><h4>Cara main</h4>
    <p>Ketik 5 huruf lalu ENTER. Hijau = benar &amp; posisi tepat, Kuning = huruf ada tapi salah posisi, Abu = tidak ada.</p>
  </section>

  <section class="board-wrap"><div id="board" class="grid" aria-label="board"></div></section>
  <div id="msg" class="msg"></div>

  <!-- Hard Mode Toggle + Info -->
  <section class="pillbar">
    <span class="pill">Huruf: <b>5</b></span>
    <span class="pill">Kesempatan: <b>6</b></span>
    <label class="pill" style="display:flex;align-items:center;gap:8px;cursor:pointer">
      <input id="hardToggle" type="checkbox" style="accent-color:#b8ff9a;width:16px;height:16px">
      <span>Mode Hard</span>
    </label>
    <button id="reset" class="btn accent">Reset</button>
  </section>

  <div class="kb-wrap">
    <div class="kb" id="kb">
      <div class="kb-rows" id="kbRows"></div>
      <div class="side">
        <button class="key del" id="btnDel">DEL</button>
        <button class="key enter" id="btnEnter">ENTER</button>
      </div>
    </div>
  </div>

  <div class="license" style="margin-top:14px">
    <p>Lisensi MIT • © 2025 Azbry-MD</p>
    <a href="./index.html" class="cta">↗ Kembali ke Menu</a>
  </div>
</main>

<script>
(()=>{
// ===== Dictionary =====
const WORDS=["ADUAN","AKHIR","ANGIN","APIAN","ASING","BATAS","BAYAR","BEBAS","BENAR","BENIH","BESAR","BIDIK","BISIK","BUNGA","BURUH","CAHYA","CANDU","CIPTA","CUKUP","DAMAI","DUNIA","GAJAH","GARIS","GERAK","HADIR","HAKIM","HALUS","HARTA","IKLAN","IKLIM","ILHAM","IMPIA","INDAH","ISIAN","ISTIR","JAMUR","JANJI","JELAS","JUARA","KABAR","KAMAR","KASIH","KAYUH","KEBAT","KERJA","KORAN","KUNCI","LAGAR","LAMPU","LARUT","LAWAN","LELAH","LIRIK","LUCUH","MADIN","MAHAS","MAKAN","MALAM","MANDI","MANIS","MASUK","MAWAR","MEKAN","MIMPI","MINUM","MODAL","MULAI","MURID","NAKAL","NASIH","PANAS","PANDA","PANTU","PASAR","PEDAG","PEMBA","PESAN","PIKIR","PILIH","PINDA","RAHAS","RAKIT","RAMAI","RAPAT","RASAQ","REKSA","RINGA","RUMAH","SAMPA","SAKIT","SENJA","SENYU","SINAR","SUARA","SURAT","TAMAN","TANGG","TIDUR","UJUNG","WARNA"];
const TARGET=()=>WORDS[Math.random()*WORDS.length|0];

// ===== state =====
let answer=TARGET(),row=0,col=0,grid=Array.from({length:6},()=>Array(5).fill(""));
let HARD=false;
let fixedPos=Array(5).fill(null),minCount={},bannedPos=Object.create(null);

// ===== DOM =====
const $b=document.getElementById("board"),$m=document.getElementById("msg");
const $kbRows=document.getElementById("kbRows"),$btnEnter=document.getElementById("btnEnter"),$btnDel=document.getElementById("btnDel");
const $hard=document.getElementById("hardToggle");
$hard.addEventListener("change",()=>{HARD=$hard.checked;setMsg(HARD?"Mode Hard aktif.":"")});

// ===== render =====
function draw(){ $b.innerHTML="";for(let r=0;r<6;r++){for(let c=0;c<5;c++){const d=document.createElement("div");d.className="cell";d.textContent=(grid[r][c]||"").toUpperCase();$b.appendChild(d);}}}
function setMsg(t){$m.textContent=t||"";}

// ===== logic =====
function reveal(r){
 const guess=grid[r].join("").toUpperCase();const A=answer.split(""),G=guess.split("");const used=Array(5).fill(false);
 for(let i=0;i<5;i++){const cell=$b.children[r*5+i];if(G[i]===A[i]){cell.classList.add("f");used[i]=true;}}
 for(let i=0;i<5;i++){const cell=$b.children[r*5+i];if(cell.classList.contains("f"))continue;let k=A.findIndex((ch,j)=>!used[j]&&ch===G[i]);if(k>-1){cell.classList.add("p");used[k]=true;}else cell.classList.add("m");}
 for(let i=0;i<5;i++){setTimeout(()=>$b.children[r*5+i].classList.add("flip"),i*85);}
 if(HARD){updateConstraints(r);}
 if(guess===answer){setMsg("MENANG! Jawaban: "+answer);lock();}else if(r===5){setMsg("Kalah. Jawaban: "+answer);lock();}
}

function lock(){document.removeEventListener("keydown",onKey);}
function commit(){if(col<5){bumpRow(row);return;}
 const guess=grid[row].join("").toUpperCase();
 if(HARD){const err=validateHard(guess);if(err){setMsg(err);bumpRow(row);return;}}
 reveal(row);row++;col=0;}
function put(ch){if(row>=6||col>=5)return;grid[row][col++]=ch;draw();popCell(row,col-1);}
function back(){if(col>0){grid[row][--col]="";draw();}}
function onKey(e){const k=e.key.toUpperCase();if(k==="ENTER")commit();else if(k==="BACKSPACE")back();else if(k.length===1&&k>="A"&&k<="Z")put(k);}
document.addEventListener("keydown",onKey);

// ===== Hard mode functions =====
function validateHard(guess){
 for(let i=0;i<5;i++){if(fixedPos[i]&&guess[i]!==fixedPos[i])return `Mode Hard: Posisi ${i+1} harus '${fixedPos[i]}'.`;}
 for(const L in bannedPos){for(const pos of bannedPos[L]){if(guess[pos]===L)return `Mode Hard: '${L}' tidak boleh di posisi ${pos+1}.`;}}
 const cnt={};for(const ch of guess)cnt[ch]=(cnt[ch]||0)+1;
 for(const L in minCount){if((cnt[L]||0)<minCount[L])return `Mode Hard: harus mengandung '${L}' minimal ${minCount[L]}x.`;}
 return null;
}
function updateConstraints(r){
 const guess=grid[r].join("").toUpperCase();const A=answer.split("");const rowMin={};
 for(let i=0;i<5;i++){const cell=$b.children[r*5+i];const L=guess[i];
   if(cell.classList.contains("f")){fixedPos[i]=L;rowMin[L]=(rowMin[L]||0)+1;}
   else if(cell.classList.contains("p")){if(!bannedPos[L])bannedPos[L]=new Set();bannedPos[L].add(i);rowMin[L]=(rowMin[L]||0)+1;}
 }
 for(const L in rowMin){minCount[L]=Math.max(minCount[L]||0,rowMin[L]);}
}

// ===== keyboard =====
const L1="QWERTYUIOP",L2="ASDFGHJKL",L3="ZXCVBNM";
function makeRow(letters){const div=document.createElement("div");div.className="row";
 letters.split("").forEach(k=>{const b=mkKey(k,()=>put(k));div.appendChild(b);});return div;}
function mkKey(label,fn){const b=document.createElement("button");b.className="key";b.textContent=label;b.onclick=fn;return b;}
$kbRows.append(makeRow(L1),makeRow(L2),makeRow(L3));
$btnEnter.onclick=commit;$btnDel.onclick=back;

// ===== reset =====
document.getElementById("reset").onclick=()=>{
 answer=TARGET();row=0;col=0;grid=Array.from({length:6},()=>Array(5).fill(""));
 fixedPos=Array(5).fill(null);minCount={};bannedPos=Object.create(null);
 draw();setMsg("");document.addEventListener("keydown",onKey);
};

// ===== efek =====
function popCell(r,c){const cell=$b.children[r*5+c];cell.classList.remove("pop");void cell.offsetWidth;cell.classList.add("pop");}
function bumpRow(r){for(let i=0;i<5;i++){const cell=$b.children[r*5+i];cell.style.transform="translateX(-4px)";
 setTimeout(()=>cell.style.transform="translateX(4px)",60);setTimeout(()=>cell.style.transform="",120);}}
draw();
})();
</script>
</body>
</html>
